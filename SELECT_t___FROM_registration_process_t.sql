insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e1c6f8433117400018f5a1f', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e206ce42cbfb13c5b47c20f', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e256b6df45f1028fcd505f9', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e3d366641bbc256fe8b9c5e', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e3d368841bbc256fe8b9c65', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e3d386941bbc256fe8b9c8d', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e3d389b41bbc256fe8b9c98', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5f80e53a2ab1245b59ae65', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5f81063a2ab1245b59ae6d', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5f9fd53a2ab1245b59ae93', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5fa0003a2ab1245b59ae9b', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5fa1c23a2ab1245b59aeab', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5fa9d43a2ab1245b59aeda', '["string"]', 'string', 'string', 'string', 'string', '["string"]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5fad373a2ab1245b59aee2', '[{"FORM": [{"key": "msisdn", "value": "0612900009"}, {"key": "title", "value": "MR"}, {"key": "givenName", "value": "Dupont0009"}, {"key": "familyName", "value": "Alexandre0009"}, {"key": "birthdate", "value": "1950-01-01"}, {"key": "street1", "value": "rue me"}, {"key": "city", "value": "Caen"}, {"key": "individualIdentificationId", "value": "687FAZAKJH0009"}, {"key": "offer", "value": "N1"}, {"key": "enrollment", "value": "YES"}], "FILEID": "d6741baa-3564-4e8d-bfc7-812f920b9564", "CHANNEL": "SELFCARE", "LAST_EVENT": {"fileId": "d6741baa-3564-4e8d-bfc7-812f920b9564", "cftStatus": null, "eventType": "CLOSED", "boCftStatus": null, "boOperation": "STORE_ONLY", "appliedOffer": "N1", "creationDate": "2020-03-04T13:29:33.652Z", "fileStatusAt": null, "distributorId": "0612900009", "foreignFileId": null, "operationType": "CREATION", "fileCompleteAt": null, "apiConsumerType": "SUBSCRIPTION", "backOfficeLevel": null, "fileCreationDate": "2020-03-04T13:29:27.206Z", "subscriberMsisdn": "0612900009", "subscriptionType": "SELFCARE", "validationStatus": null, "backOfficeUsername": null, "dateOmAccountCreated": "2020-03-04T13:29:27.620Z", "fileLastModifiedDate": "2020-03-04T13:29:33.634Z", "validationReceivedAt": null}, "INITIAL_MDC": {"lang": "fr", "fileId": "d6741baa-3564-4e8d-bfc7-812f920b9564", "msisdn": "0612900009", "channel": "SELFCARE", "country": "MA", "traceId": "ad465851-fbfa-4ad3-a1d8-f1a86865f253", "useCase": "selfSubscription", "version": "1.2.3-RC01", "technicalOffer": "N/A-N1", "apiConsumerName": "AppSelfCare", "apiConsumerType": "SUBSCRIPTION", "httpRequestReceivedDateTime": "2020-03-04T13:29:27.098"}, "INCOMING_KYC": {"city": "Caen", "title": "MR", "msisdn": "0612900009", "country": null, "street1": "rue me", "street2": null, "district": null, "postcode": null, "birthdate": "1950-01-01", "givenName": "Dupont0009", "familyName": "Alexandre0009", "nationality": null, "stateOrProvince": null, "identificationId": "687FAZAKJH0009", "identificationType": null, "identificationIssuingDate": null, "identificationExpirationDate": null}, "APPLIED_OFFER": "N1", "FORM_TEMPLATE": [{"key": "msisdn", "label": [{"lang": "fr", "label": "MSISDN"}], "format": "string", "mandatory": true, "maxLength": 15, "validation": "[0-9]{8,15}"}, {"key": "title", "label": [{"lang": "fr", "label": "Civilité"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "MR", "label": [{"lang": "fr", "label": "Monsieur"}]}, {"key": "MRS", "label": [{"lang": "fr", "label": "Madame"}]}]}, {"key": "givenName", "label": [{"lang": "fr", "label": "Prénom"}], "format": "string", "mandatory": true, "maxLength": 80, "validation": "[a-zA-Z0-9-'' áàâäçéèêëíìîïóòôöúùûüýÿÁÀÂÄÇÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝŸ]{0,80}"}, {"key": "familyName", "label": [{"lang": "fr", "label": "Nom de famille"}], "format": "string", "mandatory": true, "maxLength": 80, "validation": "[a-zA-Z0-9-'' áàâäçéèêëíìîïóòôöúùûüýÿÁÀÂÄÇÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝŸ]{0,80}"}, {"key": "birthdate", "label": [{"lang": "fr", "label": "Date de naissance"}], "format": "date", "mandatory": true, "maxLength": 10, "validation": "[0-9]{4}\\\\-[0-9]{2}\\\\-[0-9]{2}"}, {"key": "street1", "label": [{"lang": "fr", "label": "Adresse"}], "format": "string", "mandatory": true, "maxLength": 50, "validation": "[A-Za-z0-9, ]{0,50}"}, {"key": "city", "label": [{"lang": "fr", "label": "Ville"}], "format": "string", "mandatory": true, "maxLength": 30, "validation": "[A-Za-z0-9 ]{0,30}"}, {"key": "individualIdentificationId", "label": [{"lang": "fr", "label": "Numéro de pièce"}], "format": "string", "mandatory": true, "maxLength": 20, "validation": "[A-Za-z0-9]{0,20}"}, {"key": "offer", "label": [{"lang": "fr", "label": "offre OM"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "N1", "label": [{"lang": "fr", "label": "N1"}]}]}, {"key": "enrollment", "label": [{"lang": "fr", "label": "enrollment"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "YES", "label": [{"lang": "fr", "label": "oui"}]}, {"key": "NO", "label": [{"lang": "fr", "label": "non"}]}]}], "DISTRIBUTOR_ID": "0612900009", "FILE_OPERATION": {"fileOperation": "STORE_ONLY"}, "FOREIGN_FILEID": null, "PROCESS_SUCCEED": true, "RETAILER_MSISDN": null, "TECHNICAL_OFFER": {"actualOffer": "N/A", "invalidOffer": "N1", "beforeBoOffer": "N1", "targetedOffer": "N1", "incompleteOffer": "N1", "formTemplateFilename": "MA-FORM-TEMPLATE-N1.yml", "processConfigurationFilename": "MA-PROCESS-CREATION-N1.yml"}, "FILE_CREATED_DATE": {"localDateTime": "2020-03-04T13:29:27.206"}, "SUBSCRIBER_MSISDN": "0612900009", "WAITING_FOR_VALIDATION": false, "OM_ACCOUNT_CREATED_DATE": {"localDateTime": "2020-03-04T13:29:27.62"}, "REGISTRATION_FILE_STATE": {"registrationFileState": "CLOSED"}, "SWITCH_ENROLLMENT_SUCCEED": false, "SWITCH_ENROLLMENT_EXPECTED": true, "FILE_SENT_FOR_VALIDATION_AT": "2020-03-04T13:29:33.602+0000", "FILE_SENT_FOR_VALIDATION_SUCCEED": true}]', 'd6741baa-3564-4e8d-bfc7-812f920b9564', 0612900009, '2020-03-04T13:29:27.279', '2020-03-04T13:29:33.667', '[{"endDate": "2020-03-04T13:29:27.407", "attempts": [{"in": null, "out": "Event{eventType=INITIALIZED, creationDate=2020-03-04T13:29:27.399, fileCreationDate=2020-03-04T13:29:27.206, lastModifiedDate=2020-03-04T13:29:27.206, operationType=CREATION, distributorId=''0612900009'', apiConsumerType=SUBSCRIPTION, subscriptionType=SELFCARE, fileId=''d6741baa-3564-4e8d-bfc7-812f920b9564'', foreignFileId=''null'', subscriberMsisdn=''0612900009'', cftStatus=null, dateOmAccountCreated=null, boOperation=null, appliedOffer=null, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T13:29:27.407", "startDate": "2020-03-04T13:29:27.394", "attemptResult": "SUCCESS"}], "eventType": "INITIALIZED", "startDate": "2020-03-04T13:29:27.394", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event INITIALIZED for GR", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"endDate": "2020-03-04T13:29:27.62", "attempts": [{"in": "offer=N1, profile=NO_KYC, incoming KYC=Kyc (msisdn=0612900009, birthdate=1950-01-01T00:00, givenName=Dupont0009, familyName=Alexandre0009, title=MR, street1=rue me, street2=null, city=Caen, district=null, postcode=null, stateOrProvince=null, identificationType=null, identificationId=687FAZAKJH0009, identificationIssuingDate=null, identificationExpirationDate=null, country=null, nationality=null)", "out": "brokerCode=200, mappingCode=SUCCESS, txnStatus=200", "endDate": "2020-03-04T13:29:27.62", "startDate": "2020-03-04T13:29:27.498", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:27.497", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS X 3"]}, "friendlyName": "Create self subscriber on TANGO", "preCondition": null, "outputContextKeys": ["OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER", "OM_ACCOUNT_CREATION_FAILURE_REASON", "PROCESS_SUCCEED"], "lastSynchronousStep": true, "suspensiveCondition": null, "mandatoryInputContextKeys": ["TECHNICAL_OFFER", "INCOMING_KYC"]}, {"endDate": "2020-03-04T13:29:27.634", "attempts": [{"in": null, "out": "Event{eventType=SUBSCRIBER_CREATED, creationDate=2020-03-04T13:29:27.631, fileCreationDate=2020-03-04T13:29:27.206, lastModifiedDate=2020-03-04T13:29:27.206, operationType=CREATION, distributorId=''0612900009'', apiConsumerType=SUBSCRIPTION, subscriptionType=SELFCARE, fileId=''d6741baa-3564-4e8d-bfc7-812f920b9564'', foreignFileId=''null'', subscriberMsisdn=''0612900009'', cftStatus=null, dateOmAccountCreated=2020-03-04T13:29:27.620, boOperation=null, appliedOffer=null, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T13:29:27.634", "startDate": "2020-03-04T13:29:27.627", "attemptResult": "SUCCESS"}], "eventType": "SUBSCRIBER_CREATED", "startDate": "2020-03-04T13:29:27.627", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event SUBSCRIBER_CREATED for GR", "preCondition": "context[''PROCESS_SUCCEED''] == true", "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"endDate": "2020-03-04T13:29:27.648", "attempts": [{"in": null, "out": "[OM_ACCOUNT_CREATED_DATE updated with 2020-03-04T13:29:27.620, APPLIED_OFFER updated with N1]", "endDate": "2020-03-04T13:29:27.648", "startDate": "2020-03-04T13:29:27.643", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:27.642", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Update file in database (fields=OM_ACCOUNT_CREATED_DATE, APPLIED_OFFER)", "preCondition": "context[''PROCESS_SUCCEED''] == true", "fieldsToUpdate": ["OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER"], "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID", "OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER"]}, {"endDate": "2020-03-04T13:29:27.676", "attempts": [{"in": "sms.SUBSCRIBER_BEFOREBO_NA_N1 to SUBSCRIBER 0612900009", "out": "0: Accepted for delivery", "endDate": "2020-03-04T13:29:27.676", "startDate": "2020-03-04T13:29:27.653", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:27.653", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES"]}, "smsReceiver": "SUBSCRIBER", "friendlyName": "Send SMS to SUBSCRIBER", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "SUBSCRIBER_LANG"]}, {"endDate": "2020-03-04T13:29:27.721", "attempts": [{"in": null, "out": "code=INTEROP_40071, mappedCode=ERRORDEFAULT_INTERNAL, defaultWalletStatus=, interopRefId=1f6e9260-597c498a-8e6a9f34-2cc4f633", "endDate": "2020-03-04T13:29:27.721", "startDate": "2020-03-04T13:29:27.685", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:27.684", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS"]}, "friendlyName": "switch enrollment", "preCondition": "context[''PROCESS_SUCCEED''] == true && context[''SWITCH_ENROLLMENT_EXPECTED''] == true", "outputContextKeys": ["SWITCH_ENROLLMENT_SUCCEED"], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "SUBSCRIBER_LANG"]}, {"endDate": "2020-03-04T13:29:27.733", "attempts": [{"in": null, "out": "Event{eventType=READY_FOR_VALIDATION, creationDate=2020-03-04T13:29:27.730, fileCreationDate=2020-03-04T13:29:27.206, lastModifiedDate=2020-03-04T13:29:27.643, operationType=CREATION, distributorId=''0612900009'', apiConsumerType=SUBSCRIPTION, subscriptionType=SELFCARE, fileId=''d6741baa-3564-4e8d-bfc7-812f920b9564'', foreignFileId=''null'', subscriberMsisdn=''0612900009'', cftStatus=null, dateOmAccountCreated=2020-03-04T13:29:27.620, boOperation=null, appliedOffer=N1, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T13:29:27.733", "startDate": "2020-03-04T13:29:27.726", "attemptResult": "SUCCESS"}], "eventType": "READY_FOR_VALIDATION", "startDate": "2020-03-04T13:29:27.726", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event READY_FOR_VALIDATION for GR", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"endDate": "2020-03-04T13:29:33.602", "attempts": [{"in": "processSucceed=true, cftStatus=null, userSuspended=false", "out": "fileOperation=STORE_ONLY, success=true, gradeType=N1, accountExist=true, backOfficeLevel=[]", "endDate": "2020-03-04T13:29:33.602", "startDate": "2020-03-04T13:29:27.739", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:27.739", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS", "12 HOURS", "1 DAYSX7"]}, "friendlyName": "Send file to validation backend", "preCondition": null, "forceStoreOnly": true, "outputContextKeys": ["FILE_SENT_FOR_VALIDATION_SUCCEED", "FILE_SENT_FOR_VALIDATION_AT", "FILE_OPERATION", "WAITING_FOR_VALIDATION"], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "CHANNEL", "FORM_TEMPLATE", "FORM", "DISTRIBUTOR_ID", "PROCESS_SUCCEED", "TECHNICAL_OFFER", "OM_ACCOUNT_CREATION_FAILURE_REASON"], "customerRequestFormOperation": "CREATION"}, {"endDate": "2020-03-04T13:29:33.619", "attempts": [{"in": null, "out": "Event{eventType=SENT_FOR_VALIDATION, creationDate=2020-03-04T13:29:33.616, fileCreationDate=2020-03-04T13:29:27.206, lastModifiedDate=2020-03-04T13:29:27.643, operationType=CREATION, distributorId=''0612900009'', apiConsumerType=SUBSCRIPTION, subscriptionType=SELFCARE, fileId=''d6741baa-3564-4e8d-bfc7-812f920b9564'', foreignFileId=''null'', subscriberMsisdn=''0612900009'', cftStatus=null, dateOmAccountCreated=2020-03-04T13:29:27.620, boOperation=STORE_ONLY, appliedOffer=N1, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T13:29:33.619", "startDate": "2020-03-04T13:29:33.613", "attemptResult": "SUCCESS"}], "eventType": "SENT_FOR_VALIDATION", "startDate": "2020-03-04T13:29:33.613", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event SENT_FOR_VALIDATION for GR", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"endDate": "2020-03-04T13:29:33.626", "attempts": [{"in": "fileSentSucceed=true, fileOperation=STORE_ONLY", "out": "registrationFileState=CLOSED", "endDate": "2020-03-04T13:29:33.626", "startDate": "2020-03-04T13:29:33.626", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:33.626", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Determine file state", "preCondition": null, "outputContextKeys": ["REGISTRATION_FILE_STATE"], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILE_OPERATION", "FILE_SENT_FOR_VALIDATION_SUCCEED"]}, {"endDate": "2020-03-04T13:29:33.637", "attempts": [{"in": null, "out": "[STATE updated with CLOSED, SENT_FOR_VALIDATION_AT updated with 2020-03-04T13:29:33.602]", "endDate": "2020-03-04T13:29:33.637", "startDate": "2020-03-04T13:29:33.634", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T13:29:33.634", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Update file in database (fields=STATE, SENT_FOR_VALIDATION_AT)", "preCondition": null, "fieldsToUpdate": ["STATE", "SENT_FOR_VALIDATION_AT"], "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID", "REGISTRATION_FILE_STATE", "FILE_SENT_FOR_VALIDATION_AT"]}, {"endDate": "2020-03-04T13:29:33.655", "attempts": [{"in": null, "out": "Event{eventType=CLOSED, creationDate=2020-03-04T13:29:33.652, fileCreationDate=2020-03-04T13:29:27.206, lastModifiedDate=2020-03-04T13:29:33.634, operationType=CREATION, distributorId=''0612900009'', apiConsumerType=SUBSCRIPTION, subscriptionType=SELFCARE, fileId=''d6741baa-3564-4e8d-bfc7-812f920b9564'', foreignFileId=''null'', subscriberMsisdn=''0612900009'', cftStatus=null, dateOmAccountCreated=2020-03-04T13:29:27.620, boOperation=STORE_ONLY, appliedOffer=N1, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T13:29:33.655", "startDate": "2020-03-04T13:29:33.645", "attemptResult": "SUCCESS"}], "eventType": "CLOSED", "startDate": "2020-03-04T13:29:33.645", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event CLOSED for GR", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}]');
insert into registration.process (id, context, file_id, subscriber_msisdn, created_date, last_modified_date, tasks) values ('5e5fb6a43a2ab1245b59af0a', '{"FORM": [{"key": "msisdn", "value": "0612900202"}, {"key": "title", "value": "MR"}, {"key": "givenName", "value": "Dupont0101"}, {"key": "familyName", "value": "Alexandre0101"}, {"key": "birthdate", "value": "1950-01-01"}, {"key": "street1", "value": "Rue du bac"}, {"key": "postcode", "value": "14000"}, {"key": "city", "value": "Caen"}, {"key": "individualIdentificationType", "value": "NATIONAL_ID"}, {"key": "individualIdentificationId", "value": "687FAZAKJH0101"}, {"key": "individualIdentificationExpirationDate", "value": "2022-02-12"}, {"key": "countryIso", "value": "MA"}, {"key": "nationalityIso", "value": "MA"}, {"key": "expirationDate", "value": "2022-02-12"}, {"key": "offer", "value": "N2"}, {"key": "enrollment", "value": "YES"}], "FILEID": "19c3fb0e-9c76-4749-a63b-58ff8ccc7b20", "CHANNEL": "OSHOP", "CFT_ERROR": false, "LAST_EVENT": {"fileId": "19c3fb0e-9c76-4749-a63b-58ff8ccc7b20", "cftStatus": "GO", "eventType": "SENT_FOR_VALIDATION", "boCftStatus": null, "boOperation": "STORE_ONLY", "appliedOffer": null, "creationDate": "2020-03-04T14:09:47.723Z", "fileStatusAt": null, "distributorId": "1111", "foreignFileId": "foreignFileId12345", "operationType": "CREATION", "fileCompleteAt": null, "apiConsumerType": "SUBSCRIPTION", "backOfficeLevel": null, "fileCreationDate": "2020-03-04T14:09:40.123Z", "subscriberMsisdn": "0612900202", "subscriptionType": "OSHOP", "validationStatus": null, "backOfficeUsername": null, "dateOmAccountCreated": null, "fileLastModifiedDate": "2020-03-04T14:09:44.897Z", "validationReceivedAt": null}, "INITIAL_MDC": {"lang": "fr", "fileId": "19c3fb0e-9c76-4749-a63b-58ff8ccc7b20", "msisdn": "0612900202", "channel": "OSHOP", "country": "MA", "traceId": "6d995eca-9d62-44ac-a15d-1a015cc1c519", "useCase": "thirdSubscription", "version": "1.2.3-RC01", "technicalOffer": "N/A-N2", "apiConsumerName": "AppSelfCare", "apiConsumerType": "SUBSCRIPTION", "httpRequestReceivedDateTime": "2020-03-04T14:09:40.027"}, "INCOMING_KYC": {"city": "Caen", "title": "MR", "msisdn": "0612900202", "country": "MA", "street1": "Rue du bac", "street2": null, "district": null, "postcode": "14000", "birthdate": "1950-01-01", "givenName": "Dupont0101", "familyName": "Alexandre0101", "nationality": "MA", "stateOrProvince": null, "identificationId": "687FAZAKJH0101", "identificationType": "NATIONAL_ID", "identificationIssuingDate": null, "identificationExpirationDate": "2022-02-12"}, "FORM_TEMPLATE": [{"key": "msisdn", "label": [{"lang": "fr", "label": "MSISDN"}], "format": "string", "mandatory": true, "maxLength": 15, "validation": "[0-9]{8,15}"}, {"key": "title", "label": [{"lang": "fr", "label": "Civilité"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "MR", "label": [{"lang": "fr", "label": "Monsieur"}]}, {"key": "MRS", "label": [{"lang": "fr", "label": "Madame"}]}]}, {"key": "givenName", "label": [{"lang": "fr", "label": "Prénom"}], "format": "string", "mandatory": true, "maxLength": 80, "validation": "[a-zA-Z0-9-'' áàâäçéèêëíìîïóòôöúùûüýÿÁÀÂÄÇÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝŸ]{0,80}"}, {"key": "familyName", "label": [{"lang": "fr", "label": "Nom de famille"}], "format": "string", "mandatory": true, "maxLength": 80, "validation": "[a-zA-Z0-9-'' áàâäçéèêëíìîïóòôöúùûüýÿÁÀÂÄÇÉÈÊËÍÌÎÏÓÒÔÖÕÚÙÛÜÝŸ]{0,80}"}, {"key": "birthdate", "label": [{"lang": "fr", "label": "Date de naissance"}], "format": "date", "mandatory": true, "maxLength": 10, "validation": "[0-9]{4}\\\\-[0-9]{2}\\\\-[0-9]{2}"}, {"key": "street1", "label": [{"lang": "fr", "label": "Adresse"}], "format": "string", "mandatory": true, "maxLength": 50, "validation": "[A-Za-z0-9, ]{0,50}"}, {"key": "postcode", "label": [{"lang": "fr", "label": "Code Postal"}], "format": "string", "mandatory": true, "maxLength": 7, "validation": "[A-Z0-9]{0,7}"}, {"key": "city", "label": [{"lang": "fr", "label": "Ville"}], "format": "string", "mandatory": true, "maxLength": 30, "validation": "[A-Za-z0-9 ]{0,30}"}, {"key": "individualIdentificationType", "label": [{"lang": "fr", "label": "Type de pièce d''identité"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "PASSPORT", "label": [{"lang": "fr", "label": "passeport"}]}, {"key": "NATIONAL_ID", "label": [{"lang": "fr", "label": "carte d''identite"}]}, {"key": "DRIVER_CARD", "label": [{"lang": "fr", "label": "Permis de conduire"}]}, {"key": "SSN", "label": [{"lang": "fr", "label": "numéro de sécurité sociale"}]}, {"key": "GOVT_ID", "label": [{"lang": "fr", "label": "id national"}]}, {"key": "VOTER_CARD", "label": [{"lang": "fr", "label": "carte d''électeur"}]}, {"key": "RATION_CARD", "label": [{"lang": "fr", "label": "carte de rationnement"}]}, {"key": "RESIDENT_CARD", "label": [{"lang": "fr", "label": "titre de sejour"}]}]}, {"key": "individualIdentificationId", "label": [{"lang": "fr", "label": "Numéro de pièce"}], "format": "string", "mandatory": true, "maxLength": 14, "validation": "[A-Za-z0-9]{0,14}"}, {"key": "individualIdentificationExpirationDate", "label": [{"lang": "fr", "label": "Date d’expiration de la pièce"}], "format": "date", "mandatory": true, "maxLength": 10, "validation": "[0-9]{4}\\\\-[0-9]{2}\\\\-[0-9]{2}"}, {"key": "countryIso", "label": [{"lang": "fr", "label": "Pays"}], "format": "string", "mandatory": true, "maxLength": 2, "validation": "[a-zA-Z]{2}"}, {"key": "nationalityIso", "label": [{"lang": "fr", "label": "Nationalité"}], "format": "string", "mandatory": true, "maxLength": 2, "validation": "[a-zA-Z]{2}"}, {"key": "offer", "label": [{"lang": "fr", "label": "offre OM"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "N2", "label": [{"lang": "fr", "label": "N2"}]}, {"key": "N3", "label": [{"lang": "fr", "label": "N3"}]}]}, {"key": "enrollment", "label": [{"lang": "fr", "label": "enrollment"}], "format": "list", "mandatory": true, "allowedValues": [{"key": "YES", "label": [{"lang": "fr", "label": "oui"}]}, {"key": "NO", "label": [{"lang": "fr", "label": "non"}]}]}], "DISTRIBUTOR_ID": "1111", "FILE_OPERATION": {"fileOperation": "STORE_ONLY"}, "FOREIGN_FILEID": "foreignFileId12345", "PROCESS_SUCCEED": false, "RETAILER_MSISDN": null, "TECHNICAL_OFFER": {"actualOffer": "N/A", "invalidOffer": "N1", "beforeBoOffer": "N2", "targetedOffer": "N2", "incompleteOffer": "N1", "formTemplateFilename": "MA-FORM-TEMPLATE-NX.yml", "processConfigurationFilename": "MA-PROCESS-CREATION-NX.yml"}, "FILE_CREATED_DATE": {"localDateTime": "2020-03-04T14:09:40.123"}, "SUBSCRIBER_MSISDN": "0612900202", "TERMINATE_PROCESS": true, "INITIAL_CFT_STATUS": "GO", "WAITING_FOR_VALIDATION": false, "REGISTRATION_FILE_STATE": {"registrationFileState": "CLOSED"}, "SWITCH_ENROLLMENT_EXPECTED": true, "FILE_SENT_FOR_VALIDATION_AT": "2020-03-04T14:09:47.711+0000", "FILE_SENT_FOR_VALIDATION_SUCCEED": true, "OM_ACCOUNT_CREATION_FAILURE_REASON": "OM_REGISTRATION_FAILED"}', '19c3fb0e-9c76-4749-a63b-58ff8ccc7b20', 0612900202, '2020-03-04T14:09:40.123', '2020-03-04T14:09:40.123', '[{"endDate": "2020-03-04T14:09:40.312", "attempts": [{"in": null, "out": "Event{eventType=INITIALIZED, creationDate=2020-03-04T14:09:40.306, fileCreationDate=2020-03-04T14:09:40.123, lastModifiedDate=2020-03-04T14:09:40.123, operationType=CREATION, distributorId=''1111'', apiConsumerType=SUBSCRIPTION, subscriptionType=OSHOP, fileId=''19c3fb0e-9c76-4749-a63b-58ff8ccc7b20'', foreignFileId=''foreignFileId12345'', subscriberMsisdn=''0612900202'', cftStatus=null, dateOmAccountCreated=null, boOperation=null, appliedOffer=null, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T14:09:40.312", "startDate": "2020-03-04T14:09:40.302", "attemptResult": "SUCCESS"}], "eventType": "INITIALIZED", "startDate": "2020-03-04T14:09:40.302", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event INITIALIZED for GR", "preCondition": null, "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"stubed": false, "endDate": "2020-03-04T14:09:44.885", "attempts": [{"in": null, "out": "GO", "endDate": "2020-03-04T14:09:44.885", "startDate": "2020-03-04T14:09:40.385", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T14:09:40.385", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS X 3"]}, "friendlyName": "Check Cft", "preCondition": null, "outputContextKeys": ["INITIAL_CFT_STATUS", "CFT_ERROR", "PROCESS_SUCCEED"], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "INCOMING_KYC"]}, {"endDate": "2020-03-04T14:09:44.901", "attempts": [{"in": null, "out": "[CFT_STATUS updated with GO]", "endDate": "2020-03-04T14:09:44.901", "startDate": "2020-03-04T14:09:44.897", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T14:09:44.896", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Update file in database (fields=CFT_STATUS)", "preCondition": "context[''PROCESS_SUCCEED''] == true", "fieldsToUpdate": ["CFT_STATUS"], "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID", "INITIAL_CFT_STATUS"]}, {"endDate": "2020-03-04T14:09:45.025", "attempts": [{"in": "offer=N2, profile=FULL_KYCN2, incoming KYC=Kyc (msisdn=0612900202, birthdate=1950-01-01T00:00, givenName=Dupont0101, familyName=Alexandre0101, title=MR, street1=Rue du bac, street2=null, city=Caen, district=null, postcode=14000, stateOrProvince=null, identificationType=NATIONAL_ID, identificationId=687FAZAKJH0101, identificationIssuingDate=null, identificationExpirationDate=2022-02-12T00:00, country=MA, nationality=MA)", "out": "brokerCode=200, mappingCode=INVALIDREQUEST_IDNUMBER_EXISTING, txnStatus=90004", "endDate": "2020-03-04T14:09:45.025", "startDate": "2020-03-04T14:09:44.928", "attemptResult": "ERROR"}], "startDate": "2020-03-04T14:09:44.928", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS X 3"]}, "friendlyName": "Create subscriber on TANGO", "preCondition": "context[''INITIAL_CFT_STATUS''] == ''GO''", "outputContextKeys": ["OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER", "OM_ACCOUNT_CREATION_FAILURE_REASON", "PROCESS_SUCCEED"], "lastSynchronousStep": true, "suspensiveCondition": null, "mandatoryInputContextKeys": ["TECHNICAL_OFFER", "INITIAL_CFT_STATUS", "INCOMING_KYC"]}, {"endDate": "2020-03-04T14:09:45.037", "attempts": [{"in": null, "out": "pre condition <context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''> is not fulfilled, task is skipped", "endDate": "2020-03-04T14:09:45.037", "startDate": "2020-03-04T14:09:45.036", "attemptResult": "SKIPPED"}], "eventType": "SUBSCRIBER_CREATED", "startDate": "2020-03-04T14:09:45.036", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Store Event SUBSCRIBER_CREATED for GR", "preCondition": "context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''", "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID"]}, {"endDate": "2020-03-04T14:09:45.045", "attempts": [{"in": null, "out": "pre condition <context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''> is not fulfilled, task is skipped", "endDate": "2020-03-04T14:09:45.045", "startDate": "2020-03-04T14:09:45.045", "attemptResult": "SKIPPED"}], "startDate": "2020-03-04T14:09:45.045", "retryPolicy": {"policies": ["STOP"]}, "friendlyName": "Update file in database (fields=OM_ACCOUNT_CREATED_DATE, APPLIED_OFFER)", "preCondition": "context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''", "fieldsToUpdate": ["OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER"], "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["FILEID", "OM_ACCOUNT_CREATED_DATE", "APPLIED_OFFER"]}, {"endDate": "2020-03-04T14:09:45.075", "attempts": [{"in": "sms.SUBSCRIBER_FAILED_NA_N2 to SUBSCRIBER 0612900202", "out": "0: Accepted for delivery", "endDate": "2020-03-04T14:09:45.075", "startDate": "2020-03-04T14:09:45.054", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T14:09:45.054", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES"]}, "smsReceiver": "SUBSCRIBER", "friendlyName": "Send SMS to SUBSCRIBER", "preCondition": "context[''INITIAL_CFT_STATUS''] != ''NOGO''", "outputContextKeys": [], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "SUBSCRIBER_LANG"]}, {"endDate": "2020-03-04T14:09:45.084", "attempts": [{"in": null, "out": "pre condition <context[''SWITCH_ENROLLMENT_EXPECTED''] == true && context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''> is not fulfilled, task is skipped", "endDate": "2020-03-04T14:09:45.084", "startDate": "2020-03-04T14:09:45.083", "attemptResult": "SKIPPED"}], "startDate": "2020-03-04T14:09:45.083", "retryPolicy": {"policies": ["10 SECONDS", "30 SECONDS", "5 MINUTES", "1 HOURS"]}, "friendlyName": "switch enrollment", "preCondition": "context[''SWITCH_ENROLLMENT_EXPECTED''] == true && context[''PROCESS_SUCCEED''] == true && context[''INITIAL_CFT_STATUS''] == ''GO''", "outputContextKeys": ["SWITCH_ENROLLMENT_SUCCEED"], "lastSynchronousStep": false, "suspensiveCondition": null, "mandatoryInputContextKeys": ["SUBSCRIBER_MSISDN", "SUBSCRIBER_LANG"]}, {"endDate": "2020-03-04T14:09:45.099", "attempts": [{"in": null, "out": "Event{eventType=READY_FOR_VALIDATION, creationDate=2020-03-04T14:09:45.095, fileCreationDate=2020-03-04T14:09:40.123, lastModifiedDate=2020-03-04T14:09:44.897, operationType=CREATION, distributorId=''1111'', apiConsumerType=SUBSCRIPTION, subscriptionType=OSHOP, fileId=''19c3fb0e-9c76-4749-a63b-58ff8ccc7b20'', foreignFileId=''foreignFileId12345'', subscriberMsisdn=''0612900202'', cftStatus=GO, dateOmAccountCreated=null, boOperation=null, appliedOffer=null, validationStatus=null, backOfficeUsername=''null'', backOfficeLevel=null, validationReceivedAt=null, fileCompleteAt=null, fileStatusAt=null, boCftStatus=null}", "endDate": "2020-03-04T14:09:45.099", "startDate": "2020-03-04T14:09:45.092", "attemptResult": "SUCCESS"}], "startDate": "2020-03-04T14:09:45.092", "retryPolicy": {"policies": ["STOP"]}}]');
